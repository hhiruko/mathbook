var ft=Object.defineProperty;var ke=t=>{throw TypeError(t)};var mt=(t,e,n)=>e in t?ft(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var U=(t,e,n)=>mt(t,typeof e!="symbol"?e+"":e,n),vt=(t,e,n)=>e.has(t)||ke("Cannot "+n);var z=(t,e,n)=>e.has(t)?ke("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n);var S=(t,e,n)=>(vt(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const _ of i.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&r(_)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();var oe,h,We,D,be,qe,Ye,Ke,fe,ae,se,V={},ze=[],gt=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,q=Array.isArray;function T(t,e){for(var n in e)t[n]=e[n];return t}function me(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function O(t,e,n){var r,o,i,_={};for(i in e)i=="key"?r=e[i]:i=="ref"?o=e[i]:_[i]=e[i];if(arguments.length>2&&(_.children=arguments.length>3?oe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)_[i]===void 0&&(_[i]=t.defaultProps[i]);return G(t,_,r,o,null)}function G(t,e,n,r,o){var i={type:t,props:e,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++We,__i:-1,__u:0};return o==null&&h.vnode!=null&&h.vnode(i),i}function $(t){return t.children}function L(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function Je(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return Je(t)}}function we(t){(!t.__d&&(t.__d=!0)&&D.push(t)&&!te.__r++||be!=h.debounceRendering)&&((be=h.debounceRendering)||qe)(te)}function te(){for(var t,e,n,r,o,i,_,s=1;D.length;)D.length>s&&D.sort(Ye),t=D.shift(),s=D.length,t.__d&&(n=void 0,o=(r=(e=t).__v).__e,i=[],_=[],e.__P&&((n=T({},r)).__v=r.__v+1,h.vnode&&h.vnode(n),ve(e.__P,n,r,e.__n,e.__P.namespaceURI,32&r.__u?[o]:null,i,o??I(r),!!(32&r.__u),_),n.__v=r.__v,n.__.__k[n.__i]=n,Qe(i,n,_),n.__e!=o&&Je(n)));te.__r=0}function Ze(t,e,n,r,o,i,_,s,u,c,f){var l,m,d,k,g,y,p=r&&r.__k||ze,v=e.length;for(u=yt(n,e,p,u,v),l=0;l<v;l++)(d=n.__k[l])!=null&&(m=d.__i==-1?V:p[d.__i]||V,d.__i=l,y=ve(t,d,m,o,i,_,s,u,c,f),k=d.__e,d.ref&&m.ref!=d.ref&&(m.ref&&ge(m.ref,null,d),f.push(d.ref,d.__c||k,d)),g==null&&k!=null&&(g=k),4&d.__u||m.__k===d.__k?u=Ge(d,u,t):typeof d.type=="function"&&y!==void 0?u=y:k&&(u=k.nextSibling),d.__u&=-7);return n.__e=g,u}function yt(t,e,n,r,o){var i,_,s,u,c,f=n.length,l=f,m=0;for(t.__k=new Array(o),i=0;i<o;i++)(_=e[i])!=null&&typeof _!="boolean"&&typeof _!="function"?(u=i+m,(_=t.__k[i]=typeof _=="string"||typeof _=="number"||typeof _=="bigint"||_.constructor==String?G(null,_,null,null,null):q(_)?G($,{children:_},null,null,null):_.constructor==null&&_.__b>0?G(_.type,_.props,_.key,_.ref?_.ref:null,_.__v):_).__=t,_.__b=t.__b+1,s=null,(c=_.__i=kt(_,n,u,l))!=-1&&(l--,(s=n[c])&&(s.__u|=2)),s==null||s.__v==null?(c==-1&&(o>f?m--:o<f&&m++),typeof _.type!="function"&&(_.__u|=4)):c!=u&&(c==u-1?m--:c==u+1?m++:(c>u?m--:m++,_.__u|=4))):t.__k[i]=null;if(l)for(i=0;i<f;i++)(s=n[i])!=null&&(2&s.__u)==0&&(s.__e==r&&(r=I(s)),et(s,s));return r}function Ge(t,e,n){var r,o;if(typeof t.type=="function"){for(r=t.__k,o=0;r&&o<r.length;o++)r[o]&&(r[o].__=t,e=Ge(r[o],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function W(t,e){return e=e||[],t==null||typeof t=="boolean"||(q(t)?t.some(function(n){W(n,e)}):e.push(t)),e}function kt(t,e,n,r){var o,i,_=t.key,s=t.type,u=e[n];if(u===null&&t.key==null||u&&_==u.key&&s==u.type&&(2&u.__u)==0)return n;if(r>(u!=null&&(2&u.__u)==0?1:0))for(o=n-1,i=n+1;o>=0||i<e.length;){if(o>=0){if((u=e[o])&&(2&u.__u)==0&&_==u.key&&s==u.type)return o;o--}if(i<e.length){if((u=e[i])&&(2&u.__u)==0&&_==u.key&&s==u.type)return i;i++}}return-1}function Se(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||gt.test(e)?n:n+"px"}function J(t,e,n,r,o){var i,_;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof r=="string"&&(t.style.cssText=r=""),r)for(e in r)n&&e in n||Se(t.style,e,"");if(n)for(e in n)r&&n[e]==r[e]||Se(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Ke,"$1")),_=e.toLowerCase(),e=_ in t||e=="onFocusOut"||e=="onFocusIn"?_.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=n,n?r?n.u=r.u:(n.u=fe,t.addEventListener(e,i?se:ae,i)):t.removeEventListener(e,i?se:ae,i);else{if(o=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Ee(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=fe++;else if(e.t<n.u)return;return n(h.event?h.event(e):e)}}}function ve(t,e,n,r,o,i,_,s,u,c){var f,l,m,d,k,g,y,p,v,N,A,Y,j,ye,K,B,ie,x=e.type;if(e.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),i=[s=e.__e=n.__e]),(f=h.__b)&&f(e);e:if(typeof x=="function")try{if(p=e.props,v="prototype"in x&&x.prototype.render,N=(f=x.contextType)&&r[f.__c],A=f?N?N.props.value:f.__:r,n.__c?y=(l=e.__c=n.__c).__=l.__E:(v?e.__c=l=new x(p,A):(e.__c=l=new L(p,A),l.constructor=x,l.render=wt),N&&N.sub(l),l.props=p,l.state||(l.state={}),l.context=A,l.__n=r,m=l.__d=!0,l.__h=[],l._sb=[]),v&&l.__s==null&&(l.__s=l.state),v&&x.getDerivedStateFromProps!=null&&(l.__s==l.state&&(l.__s=T({},l.__s)),T(l.__s,x.getDerivedStateFromProps(p,l.__s))),d=l.props,k=l.state,l.__v=e,m)v&&x.getDerivedStateFromProps==null&&l.componentWillMount!=null&&l.componentWillMount(),v&&l.componentDidMount!=null&&l.__h.push(l.componentDidMount);else{if(v&&x.getDerivedStateFromProps==null&&p!==d&&l.componentWillReceiveProps!=null&&l.componentWillReceiveProps(p,A),!l.__e&&l.shouldComponentUpdate!=null&&l.shouldComponentUpdate(p,l.__s,A)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(l.props=p,l.state=l.__s,l.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(R){R&&(R.__=e)}),Y=0;Y<l._sb.length;Y++)l.__h.push(l._sb[Y]);l._sb=[],l.__h.length&&_.push(l);break e}l.componentWillUpdate!=null&&l.componentWillUpdate(p,l.__s,A),v&&l.componentDidUpdate!=null&&l.__h.push(function(){l.componentDidUpdate(d,k,g)})}if(l.context=A,l.props=p,l.__P=t,l.__e=!1,j=h.__r,ye=0,v){for(l.state=l.__s,l.__d=!1,j&&j(e),f=l.render(l.props,l.state,l.context),K=0;K<l._sb.length;K++)l.__h.push(l._sb[K]);l._sb=[]}else do l.__d=!1,j&&j(e),f=l.render(l.props,l.state,l.context),l.state=l.__s;while(l.__d&&++ye<25);l.state=l.__s,l.getChildContext!=null&&(r=T(T({},r),l.getChildContext())),v&&!m&&l.getSnapshotBeforeUpdate!=null&&(g=l.getSnapshotBeforeUpdate(d,k)),B=f,f!=null&&f.type===$&&f.key==null&&(B=Xe(f.props.children)),s=Ze(t,q(B)?B:[B],e,n,r,o,i,_,s,u,c),l.base=e.__e,e.__u&=-161,l.__h.length&&_.push(l),y&&(l.__E=l.__=null)}catch(R){if(e.__v=null,u||i!=null)if(R.then){for(e.__u|=u?160:128;s&&s.nodeType==8&&s.nextSibling;)s=s.nextSibling;i[i.indexOf(s)]=null,e.__e=s}else for(ie=i.length;ie--;)me(i[ie]);else e.__e=n.__e,e.__k=n.__k;h.__e(R,e,n)}else i==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):s=e.__e=bt(n.__e,e,n,r,o,i,_,u,c);return(f=h.diffed)&&f(e),128&e.__u?void 0:s}function Qe(t,e,n){for(var r=0;r<n.length;r++)ge(n[r],n[++r],n[++r]);h.__c&&h.__c(e,t),t.some(function(o){try{t=o.__h,o.__h=[],t.some(function(i){i.call(o)})}catch(i){h.__e(i,o.__v)}})}function Xe(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:q(t)?t.map(Xe):T({},t)}function bt(t,e,n,r,o,i,_,s,u){var c,f,l,m,d,k,g,y=n.props,p=e.props,v=e.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),i!=null){for(c=0;c<i.length;c++)if((d=i[c])&&"setAttribute"in d==!!v&&(v?d.localName==v:d.nodeType==3)){t=d,i[c]=null;break}}if(t==null){if(v==null)return document.createTextNode(p);t=document.createElementNS(o,v,p.is&&p),s&&(h.__m&&h.__m(e,i),s=!1),i=null}if(v==null)y===p||s&&t.data==p||(t.data=p);else{if(i=i&&oe.call(t.childNodes),y=n.props||V,!s&&i!=null)for(y={},c=0;c<t.attributes.length;c++)y[(d=t.attributes[c]).name]=d.value;for(c in y)if(d=y[c],c!="children"){if(c=="dangerouslySetInnerHTML")l=d;else if(!(c in p)){if(c=="value"&&"defaultValue"in p||c=="checked"&&"defaultChecked"in p)continue;J(t,c,null,d,o)}}for(c in p)d=p[c],c=="children"?m=d:c=="dangerouslySetInnerHTML"?f=d:c=="value"?k=d:c=="checked"?g=d:s&&typeof d!="function"||y[c]===d||J(t,c,d,y[c],o);if(f)s||l&&(f.__html==l.__html||f.__html==t.innerHTML)||(t.innerHTML=f.__html),e.__k=[];else if(l&&(t.innerHTML=""),Ze(e.type=="template"?t.content:t,q(m)?m:[m],e,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,i,_,i?i[0]:n.__k&&I(n,0),s,u),i!=null)for(c=i.length;c--;)me(i[c]);s||(c="value",v=="progress"&&k==null?t.removeAttribute("value"):k!=null&&(k!==t[c]||v=="progress"&&!k||v=="option"&&k!=y[c])&&J(t,c,k,y[c],o),c="checked",g!=null&&g!=t[c]&&J(t,c,g,y[c],o))}return t}function ge(t,e,n){try{if(typeof t=="function"){var r=typeof t.__u=="function";r&&t.__u(),r&&e==null||(t.__u=t(e))}else t.current=e}catch(o){h.__e(o,n)}}function et(t,e,n){var r,o;if(h.unmount&&h.unmount(t),(r=t.ref)&&(r.current&&r.current!=t.__e||ge(r,null,e)),(r=t.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(i){h.__e(i,e)}r.base=r.__P=null}if(r=t.__k)for(o=0;o<r.length;o++)r[o]&&et(r[o],e,n||typeof t.type!="function");n||me(t.__e),t.__c=t.__=t.__e=void 0}function wt(t,e,n){return this.constructor(t,n)}function tt(t,e,n){var r,o,i,_;e==document&&(e=document.documentElement),h.__&&h.__(t,e),o=(r=!1)?null:e.__k,i=[],_=[],ve(e,t=e.__k=O($,null,[t]),o||V,V,e.namespaceURI,o?null:e.firstChild?oe.call(e.childNodes):null,i,o?o.__e:e.firstChild,r,_),Qe(i,t,_)}oe=ze.slice,h={__e:function(t,e,n,r){for(var o,i,_;e=e.__;)if((o=e.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(t)),_=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(t,r||{}),_=o.__d),_)return o.__E=o}catch(s){t=s}throw t}},We=0,L.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=T({},this.state),typeof t=="function"&&(t=t(T({},n),this.props)),t&&T(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),we(this))},L.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),we(this))},L.prototype.render=$,D=[],qe=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ye=function(t,e){return t.__v.__b-e.__v.__b},te.__r=0,Ke=/(PointerCapture)$|Capture$/i,fe=0,ae=Ee(!1),se=Ee(!0);var St=0;function a(t,e,n,r,o,i){e||(e={});var _,s,u=e;if("ref"in u)for(s in u={},e)s=="ref"?_=e[s]:u[s]=e[s];var c={type:t,props:u,key:n,ref:_,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--St,__i:-1,__u:0,__source:o,__self:i};if(typeof t=="function"&&(_=t.defaultProps))for(s in _)u[s]===void 0&&(u[s]=_[s]);return h.vnode&&h.vnode(c),c}var ne,E,le,Me,ce=0,nt=[],b=h,xe=b.__b,Ce=b.__r,Pe=b.diffed,$e=b.__c,Te=b.unmount,Le=b.__;function rt(t,e){b.__h&&b.__h(E,t,ce||e),ce=0;var n=E.__H||(E.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function ot(t,e){var n=rt(ne++,3);!b.__s&&it(n.__H,e)&&(n.__=t,n.u=e,E.__H.__h.push(n))}function C(t){return ce=5,Et(function(){return{current:t}},[])}function Et(t,e){var n=rt(ne++,7);return it(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Mt(){for(var t;t=nt.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Q),t.__H.__h.forEach(ue),t.__H.__h=[]}catch(e){t.__H.__h=[],b.__e(e,t.__v)}}b.__b=function(t){E=null,xe&&xe(t)},b.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Le&&Le(t,e)},b.__r=function(t){Ce&&Ce(t),ne=0;var e=(E=t.__c).__H;e&&(le===E?(e.__h=[],E.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Q),e.__h.forEach(ue),e.__h=[],ne=0)),le=E},b.diffed=function(t){Pe&&Pe(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(nt.push(e)!==1&&Me===b.requestAnimationFrame||((Me=b.requestAnimationFrame)||xt)(Mt)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),le=E=null},b.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Q),n.__h=n.__h.filter(function(r){return!r.__||ue(r)})}catch(r){e.some(function(o){o.__h&&(o.__h=[])}),e=[],b.__e(r,n.__v)}}),$e&&$e(t,e)},b.unmount=function(t){Te&&Te(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{Q(r)}catch(o){e=o}}),n.__H=void 0,e&&b.__e(e,n.__v))};var He=typeof requestAnimationFrame=="function";function xt(t){var e,n=function(){clearTimeout(r),He&&cancelAnimationFrame(e),setTimeout(t)},r=setTimeout(n,35);He&&(e=requestAnimationFrame(n))}function Q(t){var e=E,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),E=e}function ue(t){var e=E;t.__c=t.__(),E=e}function it(t,e){return!t||t.length!==e.length||e.some(function(n,r){return n!==t[r]})}class X{static get(e){return localStorage.getItem(e)}static set(e,n){localStorage.setItem(e,n)}static remove(e){localStorage.removeItem(e)}static clear(){localStorage.clear()}static keys(){const e=[];for(let n=0;n<localStorage.length;n++){const r=localStorage.key(n);e.push(parseInt(r))}return e.sort((n,r)=>r-n),e}}var P,F,de;class Ct{constructor(e){z(this,P);this.COLLECTION_KEY=e}get(e){return S(this,P,F).call(this)[e]}set(e,n){const r=S(this,P,F).call(this);r[e]=n,S(this,P,de).call(this,r)}remove(e){const n=S(this,P,F).call(this);delete n[e],S(this,P,de).call(this,n)}clear(){X.remove(this.COLLECTION_KEY)}keys(){const e=S(this,P,F).call(this),n=Object.keys(e).map(r=>parseInt(r));return n.sort((r,o)=>o-r),n}}P=new WeakSet,F=function(){return JSON.parse(X.get(this.COLLECTION_KEY)??"{}")},de=function(e){X.set(this.COLLECTION_KEY,JSON.stringify(e))};var re,lt;class Pt{constructor(e){z(this,re);this.storage=e}initWriter(){this.writer=document.getElementById("writer"),this.writer.smartMode="on";const e=[{key:"space",command:["insert","\\quad "]},{key:"enter",command:["addRowAfter"]}];this.writer.keybindings=[...this.writer.keybindings,...e]}set(e=Date.now()){this.number=e,S(this,re,lt).call(this)}}re=new WeakSet,lt=function(){this.writer.style.display="block",this.writer.addEventListener("input",()=>{this.storage.set(this.number,this.writer.value)});const e=this.storage.get(this.number);e?this.writer.value=e:this.writer.value="\\displaylines{\\phantom{0}}"};class $t{constructor(e){this.storage=e,this.pages=e.keys(),this.page=new Pt(e),this.count=this.pages.length}load(){this.page.initWriter()}add(){return this.page.set(),this.page.number}open(e){this.page.set(e)}delete(e){this.storage.remove(e),this.page.writer.style.display="none"}list(){return this.pages}}function _t(t,e){for(var n in e)t[n]=e[n];return t}function Ae(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var r in e)if(r!=="__source"&&t[r]!==e[r])return!0;return!1}function De(t,e){this.props=t,this.context=e}(De.prototype=new L).isPureReactComponent=!0,De.prototype.shouldComponentUpdate=function(t,e){return Ae(this.props,t)||Ae(this.state,e)};var Oe=h.__b;h.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),Oe&&Oe(t)};var Tt=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function Lt(t){function e(n){var r=_t({},n);return delete r.ref,t(r,n.ref||null)}return e.$$typeof=Tt,e.render=e,e.prototype.isReactComponent=e.__f=!0,e.displayName="ForwardRef("+(t.displayName||t.name)+")",e}var Ht=h.__e;h.__e=function(t,e,n,r){if(t.then){for(var o,i=e;i=i.__;)if((o=i.__c)&&o.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),o.__c(t,e)}Ht(t,e,n,r)};var Ie=h.unmount;function at(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(r){typeof r.__c=="function"&&r.__c()}),t.__c.__H=null),(t=_t({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(r){return at(r,e,n)})),t}function st(t,e,n){return t&&n&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(r){return st(r,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=n)),t}function _e(){this.__u=0,this.o=null,this.__b=null}function ct(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function Z(){this.i=null,this.l=null}h.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Ie&&Ie(t)},(_e.prototype=new L).__c=function(t,e){var n=e.__c,r=this;r.o==null&&(r.o=[]),r.o.push(n);var o=ct(r.__v),i=!1,_=function(){i||(i=!0,n.__R=null,o?o(s):s())};n.__R=_;var s=function(){if(!--r.__u){if(r.state.__a){var u=r.state.__a;r.__v.__k[0]=st(u,u.__c.__P,u.__c.__O)}var c;for(r.setState({__a:r.__b=null});c=r.o.pop();)c.forceUpdate()}};r.__u++||32&e.__u||r.setState({__a:r.__b=r.__v.__k[0]}),t.then(_,_)},_e.prototype.componentWillUnmount=function(){this.o=[]},_e.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=at(this.__b,n,r.__O=r.__P)}this.__b=null}var o=e.__a&&O($,null,t.fallback);return o&&(o.__u&=-33),[O($,null,e.__a?null:t.children),o]};var Ne=function(t,e,n){if(++n[1]===n[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(n=t.i;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.i=n=n[2]}};(Z.prototype=new L).__a=function(t){var e=this,n=ct(e.__v),r=e.l.get(t);return r[0]++,function(o){var i=function(){e.props.revealOrder?(r.push(o),Ne(e,t,r)):o()};n?n(i):i()}},Z.prototype.render=function(t){this.i=null,this.l=new Map;var e=W(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.l.set(e[n],this.i=[1,0,this.i]);return t.children},Z.prototype.componentDidUpdate=Z.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,n){Ne(t,n,e)})};var At=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Dt=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ot=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,It=/[A-Z0-9]/g,Nt=typeof document<"u",jt=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};L.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(L.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var je=h.event;function Bt(){}function Rt(){return this.cancelBubble}function Ut(){return this.defaultPrevented}h.event=function(t){return je&&(t=je(t)),t.persist=Bt,t.isPropagationStopped=Rt,t.isDefaultPrevented=Ut,t.nativeEvent=t};var Ft={enumerable:!1,configurable:!0,get:function(){return this.class}},Be=h.vnode;h.vnode=function(t){typeof t.type=="string"&&function(e){var n=e.props,r=e.type,o={},i=r.indexOf("-")===-1;for(var _ in n){var s=n[_];if(!(_==="value"&&"defaultValue"in n&&s==null||Nt&&_==="children"&&r==="noscript"||_==="class"||_==="className")){var u=_.toLowerCase();_==="defaultValue"&&"value"in n&&n.value==null?_="value":_==="download"&&s===!0?s="":u==="translate"&&s==="no"?s=!1:u[0]==="o"&&u[1]==="n"?u==="ondoubleclick"?_="ondblclick":u!=="onchange"||r!=="input"&&r!=="textarea"||jt(n.type)?u==="onfocus"?_="onfocusin":u==="onblur"?_="onfocusout":Ot.test(_)&&(_=u):u=_="oninput":i&&Dt.test(_)?_=_.replace(It,"-$&").toLowerCase():s===null&&(s=void 0),u==="oninput"&&o[_=u]&&(_="oninputCapture"),o[_]=s}}r=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=W(n.children).forEach(function(c){c.props.selected=o.value.indexOf(c.props.value)!=-1})),r=="select"&&o.defaultValue!=null&&(o.value=W(n.children).forEach(function(c){c.props.selected=o.multiple?o.defaultValue.indexOf(c.props.value)!=-1:o.defaultValue==c.props.value})),n.class&&!n.className?(o.class=n.class,Object.defineProperty(o,"className",Ft)):(n.className&&!n.class||n.class&&n.className)&&(o.class=o.className=n.className),e.props=o}(t),t.$$typeof=At,Be&&Be(t)};var Re=h.__r;h.__r=function(t){Re&&Re(t),t.__c};var Ue=h.diffed;h.diffed=function(t){Ue&&Ue(t);var e=t.props,n=t.__e;n!=null&&t.type==="textarea"&&"value"in e&&e.value!==n.value&&(n.value=e.value==null?"":e.value)};class Vt{constructor(e){this.storage=e}import(e){let n=1;for(let[r,o]of Object.entries(e))this.storage.get(r)!==null&&(r=Date.now()+n,n++),this.storage.set(r,o)}export(){const e={};for(let _ of this.storage.keys())e[_]=this.storage.get(_);const n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),i=document.createElement("a");i.href=o,i.download=`${Date.now()}.json`,i.click(),URL.revokeObjectURL(o)}}/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Wt=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ve=t=>{const e=Wt(t);return e.charAt(0).toUpperCase()+e.slice(1)},qt=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Yt={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,children:o,iconNode:i,class:_="",...s})=>O("svg",{...Yt,width:String(e),height:e,stroke:t,"stroke-width":r?Number(n)*24/Number(e):n,class:["lucide",_].join(" "),...s},[...i.map(([u,c])=>O(u,c)),...W(o)]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(t,e)=>{const n=({class:r="",children:o,...i})=>O(Kt,{...i,iconNode:e,class:qt(`lucide-${Fe(Ve(t))}`,`lucide-${Fe(t)}`,r)},o);return n.displayName=Ve(t),n};/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ut=H("book-text",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}],["path",{d:"M8 11h8",key:"vwpz6n"}],["path",{d:"M8 7h6",key:"1f0q6e"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=H("boxes",[["path",{d:"M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z",key:"lc1i9w"}],["path",{d:"m7 16.5-4.74-2.85",key:"1o9zyk"}],["path",{d:"m7 16.5 5-3",key:"va8pkn"}],["path",{d:"M7 16.5v5.17",key:"jnp8gn"}],["path",{d:"M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z",key:"8zsnat"}],["path",{d:"m17 16.5-5-3",key:"8arw3v"}],["path",{d:"m17 16.5 4.74-2.85",key:"8rfmw"}],["path",{d:"M17 16.5v5.17",key:"k6z78m"}],["path",{d:"M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z",key:"1xygjf"}],["path",{d:"M12 8 7.26 5.15",key:"1vbdud"}],["path",{d:"m12 8 4.74-2.85",key:"3rx089"}],["path",{d:"M12 13.5V8",key:"1io7kd"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=H("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=H("file-plus-2",[["path",{d:"M4 22h14a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v4",key:"1pf5j1"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M3 15h6",key:"4e2qda"}],["path",{d:"M6 12v6",key:"1u72j0"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=H("folder-git-2",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["path",{d:"M18 19c-2.8 0-5-2.2-5-5v8",key:"pkpw2h"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gt=H("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=H("sun-moon",[["path",{d:"M12 8a2.83 2.83 0 0 0 4 4 4 4 0 1 1-4-4",key:"1fu5g2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.9 4.9 1.4 1.4",key:"b9915j"}],["path",{d:"m17.7 17.7 1.4 1.4",key:"qc3ed3"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.3 17.7-1.4 1.4",key:"5gca6"}],["path",{d:"m19.1 4.9-1.4 1.4",key:"wpu9u6"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=H("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-preact v0.523.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=H("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function en(){return a($,{children:[a("h2",{children:["Dependencies ",a(zt,{})]}),a("table",{children:[a("thead",{children:[a("th",{children:"Name"}),a("th",{children:"Version"}),a("th",{children:"Src"}),a("th",{children:"Descripton"})]}),a("tbody",{children:[a("tr",{children:[a("td",{children:a("a",{href:"https://cortexjs.io/mathfield/",children:"Mathfield"})}),a("td",{children:"0.105.3"}),a("td",{children:"jsdelivr"}),a("td",{children:"Visual math input field"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://watercss.kognise.dev/",children:"Water.css"})}),a("td",{children:"2.1.1"}),a("td",{children:"jsdelivr"}),a("td",{children:"Tiny, classless CSS framework"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://lucide.dev/guide/packages/lucide-preact",children:"Lucide Preact"})}),a("td",{children:"^0.523.0"}),a("td",{children:"npm"}),a("td",{children:"Icon library"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://vite.dev/",children:"Vite"})}),a("td",{children:"^6.3.5"}),a("td",{children:"npm"}),a("td",{children:"Build tool and dev server"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://preactjs.com/",children:"Preact"})}),a("td",{children:"^10.26.9"}),a("td",{children:"npm"}),a("td",{children:"Lightweight alternative to React"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://github.com/isaacs/node-glob#readme",children:"Glob"})}),a("td",{children:"^11.0.3"}),a("td",{children:"npm"}),a("td",{children:"File matching utility"})]}),a("tr",{children:[a("td",{children:a("a",{href:"https://github.com/itgalaxy/favicons",children:"Favicons"})}),a("td",{children:"^7.2.0"}),a("td",{children:"npm"}),a("td",{children:"Favicons and webmanifest tool"})]})]})]})]})}var M,ee,pt,pe;const w=class w{constructor(e){z(this,M);this.storage=e,S(this,M,pe).call(this,S(this,M,ee).call(this))}toggle(){const e=[w.SYSTEM,w.DARK,w.LIGHT];let n=e.findIndex(o=>o===S(this,M,ee).call(this));n===2?n=0:n++;const r=e[n];S(this,M,pe).call(this,r),S(this,M,pt).call(this,r)}getIcon(){let e=null;switch(S(this,M,ee).call(this)){case w.LIGHT:e=Xt;break;case w.DARK:e=Gt;break;case w.SYSTEM:default:e=Qt}return e}};M=new WeakSet,ee=function(){return this.storage.get(w.THEME_KEY)??w.SYSTEM},pt=function(e){this.storage.set(w.THEME_KEY,e)},pe=function(e){const n=document.getElementById(w.THEME_KEY),r="mathbook/";switch(e){case w.LIGHT:n.setAttribute("href",`/${r}cdn/water.light.min.css`);break;case w.DARK:n.setAttribute("href",`/${r}cdn/water.dark.min.css`);break;case w.SYSTEM:default:n.setAttribute("href",`/${r}cdn/water.system.min.css`)}},U(w,"THEME_KEY","theme-preference"),U(w,"SYSTEM","system"),U(w,"LIGHT","light"),U(w,"DARK","dark");let he=w;const tn=()=>{const t=X,e=new he(t),n=C(null),r=e.getIcon();return a("button",{id:"theme-button",ref:n,onClick:()=>{e.toggle(),n.current.innerHTML="";const i=e.getIcon();tt(a(i,{}),n.current)},children:a(r,{})})},nn=Lt(({notebook:t},e)=>{const n=new Vt(t.storage),r=C(null),o=C(null);C(null);let i=null;return a($,{children:a("div",{id:"frontpage",ref:e,children:[a("h1",{children:["Mathbook ",a("a",{id:"github-link",href:"https://github.com/hhiruko/mathbook",children:a(Zt,{})}),a(tn,{})]}),a("p",{children:"Mathbook is a simple, interactive notebook for writing, organizing, and managing math notes and formulas, with a clean, responsive interface and page-based navigation."}),a("blockquote",{children:"All your data is saved in your browser. If you clear the cache, your data will be lost."}),a("p",{children:["To start, click on the ",a(dt,{})," button at the top of the page. This will add a blank page."]}),a("p",{children:["To return to this page, click on the ",a(ut,{})," button at the top of the page."]}),a(en,{}),a("h2",{children:["Import/Export Pages ",a(Jt,{})]}),a("p",{children:"You can import new pages in JSON format:"}),a("div",{id:"import-container",children:[a("input",{type:"file",id:"json-input",accept:".json",onChange:l=>{const m=l.target.files[0];if(!m){i=null;return}const d=new FileReader;d.onload=k=>{try{i=JSON.parse(k.target.result),r.current.removeAttribute("disabled")}catch{i=null,alert("Invalid JSON file.")}},d.readAsText(m)}}),a("button",{id:"import-button",disabled:!0,ref:r,onClick:()=>{i!==null&&(n.import(i),location.reload())},children:"Import"})]}),a("p",{children:"You can export your existing pages to JSON:"}),a("button",{id:"export-button",onClick:()=>{n.export()},children:"Export"}),a("h2",{children:["Delete Pages ",a(ht,{})]}),a("div",{id:"delete-container",children:[a("p",{children:"You can delete all your pages. This process is irreversible."}),a("button",{id:"delete-dialog-trigger-button",onClick:()=>{o.current.showModal()},children:"Delete"})]}),a("dialog",{id:"delete-dialog",ref:o,closedby:"any",children:[a("p",{children:"Are you sure you want to delete all pages?"}),a("form",{class:"delete-dialog-form",method:"dialog",children:[a("button",{autofocus:!0,children:"Cancel"}),a("button",{id:"delete-button",onClick:l=>{l.preventDefault(),t.storage.clear(),location.reload()},children:"Delete"})]})]})]})})});function rn({notebook:t,writerRef:e,frontpageRef:n}){const r=C(null),o=C(null),i=C(null),_=C(null);let s=t.count;const u=(g,y)=>{const p=document.createElement("button");return p.textContent=y,p.classList.add("page"),p.addEventListener("click",()=>{t.open(g),r.current.querySelectorAll(".active").forEach(v=>v.classList.remove("active")),p.classList.add("active"),n.current.style.display="none",i.current.style.display="block"}),p},c=(g,y)=>{const p=u(g,y);return r.current.appendChild(p),p},f=(g,y)=>{const p=u(g,y);return r.current.insertBefore(p,r.current.firstChild),p},l=()=>{e.current.style.display="none",r.current.querySelectorAll(".active").forEach(g=>g.classList.remove("active")),n.current.style.display="block",i.current.style.display="none"},m=()=>{s++;const g=t.add();f(g,s).click()},d=()=>{_.current.showModal()},k=g=>{g.preventDefault(),t.storage.remove(t.page.number),location.reload()};return ot(()=>{let g=s;t.list().forEach(y=>{c(y,g),g--}),o.current.click()},[]),a($,{children:a("nav",{id:"navbar",children:[a("button",{id:"frontpage-button",ref:o,onClick:l,children:a(ut,{})}),a("button",{id:"add-page-button",onClick:m,children:a(dt,{})}),a("button",{id:"delete-page-dialog-trigger-button",ref:i,onClick:d,children:a(ht,{})}),a("dialog",{id:"delete-page-dialog",ref:_,closedby:"any",children:[a("p",{children:"Are you sure you want to delete this page?"}),a("form",{class:"delete-dialog-form",method:"dialog",children:[a("button",{autofocus:!0,children:"Cancel"}),a("button",{id:"delete-page-button",onClick:k,children:"Delete"})]})]}),a("div",{id:"pages",ref:r})]})})}function on(){const t=C(null),e=C(null),n=new Ct("notebook-pages"),r=new $t(n);return ot(()=>{r.load()},[]),a($,{children:[a(rn,{notebook:r,writerRef:t,frontpageRef:e}),a("div",{id:"main",children:[a("math-field",{id:"writer",ref:t}),a(nn,{ref:e,notebook:r})]})]})}document.title="Mathbook";"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("service-worker.js")});tt(a(on,{}),document.getElementById("app"));
