
    const assets = [
  "/mathbook/index.html",
  "/mathbook/favicons/yandex-browser-manifest.json",
  "/mathbook/favicons/yandex-browser-50x50.png",
  "/mathbook/favicons/mstile-70x70.png",
  "/mathbook/favicons/mstile-310x310.png",
  "/mathbook/favicons/mstile-310x150.png",
  "/mathbook/favicons/mstile-150x150.png",
  "/mathbook/favicons/mstile-144x144.png",
  "/mathbook/favicons/manifest.webmanifest",
  "/mathbook/favicons/icon.svg",
  "/mathbook/favicons/favicon.ico",
  "/mathbook/favicons/favicon-48x48.png",
  "/mathbook/favicons/favicon-32x32.png",
  "/mathbook/favicons/favicon-16x16.png",
  "/mathbook/favicons/browserconfig.xml",
  "/mathbook/favicons/apple-touch-startup-image-828x1792.png",
  "/mathbook/favicons/apple-touch-startup-image-750x1334.png",
  "/mathbook/favicons/apple-touch-startup-image-640x1136.png",
  "/mathbook/favicons/apple-touch-startup-image-2796x1290.png",
  "/mathbook/favicons/apple-touch-startup-image-2778x1284.png",
  "/mathbook/favicons/apple-touch-startup-image-2732x2048.png",
  "/mathbook/favicons/apple-touch-startup-image-2688x1242.png",
  "/mathbook/favicons/apple-touch-startup-image-2556x1179.png",
  "/mathbook/favicons/apple-touch-startup-image-2532x1170.png",
  "/mathbook/favicons/apple-touch-startup-image-2436x1125.png",
  "/mathbook/favicons/apple-touch-startup-image-2388x1668.png",
  "/mathbook/favicons/apple-touch-startup-image-2266x1488.png",
  "/mathbook/favicons/apple-touch-startup-image-2224x1668.png",
  "/mathbook/favicons/apple-touch-startup-image-2208x1242.png",
  "/mathbook/favicons/apple-touch-startup-image-2160x1640.png",
  "/mathbook/favicons/apple-touch-startup-image-2160x1620.png",
  "/mathbook/favicons/apple-touch-startup-image-2048x2732.png",
  "/mathbook/favicons/apple-touch-startup-image-2048x1536.png",
  "/mathbook/favicons/apple-touch-startup-image-1792x828.png",
  "/mathbook/favicons/apple-touch-startup-image-1668x2388.png",
  "/mathbook/favicons/apple-touch-startup-image-1668x2224.png",
  "/mathbook/favicons/apple-touch-startup-image-1640x2160.png",
  "/mathbook/favicons/apple-touch-startup-image-1620x2160.png",
  "/mathbook/favicons/apple-touch-startup-image-1536x2048.png",
  "/mathbook/favicons/apple-touch-startup-image-1488x2266.png",
  "/mathbook/favicons/apple-touch-startup-image-1334x750.png",
  "/mathbook/favicons/apple-touch-startup-image-1290x2796.png",
  "/mathbook/favicons/apple-touch-startup-image-1284x2778.png",
  "/mathbook/favicons/apple-touch-startup-image-1242x2688.png",
  "/mathbook/favicons/apple-touch-startup-image-1242x2208.png",
  "/mathbook/favicons/apple-touch-startup-image-1179x2556.png",
  "/mathbook/favicons/apple-touch-startup-image-1170x2532.png",
  "/mathbook/favicons/apple-touch-startup-image-1136x640.png",
  "/mathbook/favicons/apple-touch-startup-image-1125x2436.png",
  "/mathbook/favicons/apple-touch-icon.png",
  "/mathbook/favicons/apple-touch-icon-precomposed.png",
  "/mathbook/favicons/apple-touch-icon-76x76.png",
  "/mathbook/favicons/apple-touch-icon-72x72.png",
  "/mathbook/favicons/apple-touch-icon-60x60.png",
  "/mathbook/favicons/apple-touch-icon-57x57.png",
  "/mathbook/favicons/apple-touch-icon-180x180.png",
  "/mathbook/favicons/apple-touch-icon-167x167.png",
  "/mathbook/favicons/apple-touch-icon-152x152.png",
  "/mathbook/favicons/apple-touch-icon-144x144.png",
  "/mathbook/favicons/apple-touch-icon-120x120.png",
  "/mathbook/favicons/apple-touch-icon-114x114.png",
  "/mathbook/favicons/apple-touch-icon-1024x1024.png",
  "/mathbook/favicons/android-chrome-96x96.png",
  "/mathbook/favicons/android-chrome-72x72.png",
  "/mathbook/favicons/android-chrome-512x512.png",
  "/mathbook/favicons/android-chrome-48x48.png",
  "/mathbook/favicons/android-chrome-384x384.png",
  "/mathbook/favicons/android-chrome-36x36.png",
  "/mathbook/favicons/android-chrome-256x256.png",
  "/mathbook/favicons/android-chrome-192x192.png",
  "/mathbook/favicons/android-chrome-144x144.png",
  "/mathbook/cdn/mathlive.js",
  "/mathbook/assets/index-COn-ncWR.js",
  "/mathbook/assets/index-BclyZfBJ.css",
  "/mathbook/cdn/fonts/KaTeX_Typewriter-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Size4-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Size3-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Size2-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Size1-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Script-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_SansSerif-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_SansSerif-Italic.woff2",
  "/mathbook/cdn/fonts/KaTeX_SansSerif-Bold.woff2",
  "/mathbook/cdn/fonts/KaTeX_Math-Italic.woff2",
  "/mathbook/cdn/fonts/KaTeX_Math-BoldItalic.woff2",
  "/mathbook/cdn/fonts/KaTeX_Main-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Main-Italic.woff2",
  "/mathbook/cdn/fonts/KaTeX_Main-BoldItalic.woff2",
  "/mathbook/cdn/fonts/KaTeX_Main-Bold.woff2",
  "/mathbook/cdn/fonts/KaTeX_Fraktur-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Fraktur-Bold.woff2",
  "/mathbook/cdn/fonts/KaTeX_Caligraphic-Regular.woff2",
  "/mathbook/cdn/fonts/KaTeX_Caligraphic-Bold.woff2",
  "/mathbook/cdn/fonts/KaTeX_AMS-Regular.woff2",
  "/mathbook/"
];
    const CACHE_NAME = 'v2025-09-08T06:07:11.384Z';

    self.addEventListener('install', event => {
        self.skipWaiting();
        event.waitUntil(
            caches.open(CACHE_NAME).then(async cache => {
                for(const asset of assets) {
                    try {
                        await cache.add(asset);
                    } catch (e) {
                        console.error('❌ Failed to cache:', asset, e);
                    }
                }
            })
        );
    });

    self.addEventListener('fetch', event => {
        event.respondWith(
            caches.match(event.request).then(response => {
                if(response) return response;
                return fetch(event.request).catch(() => {
                    if(event.request.mode === 'navigate') {
                        return caches.match('/mathbook/index.html');
                    }
                });
            })
        );
    });

    self.addEventListener('activate', event => {
        self.clients.claim();
        event.waitUntil(
            caches.keys().then(cacheNames => {
                return Promise.all(
                    cacheNames.map(cacheName => {
                        if (cacheName !== CACHE_NAME) {
                            return caches.delete(cacheName);
                        }
                    })
                );
            })
        );
    });
